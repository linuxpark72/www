<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Debugging with Register Trace Buffers</title><link rel="Prev" href="debugging.html" title="Previous" /><link rel="Next" href="debugging_PTM.html" title="Next" /><link rel="StyleSheet" href="css/debugging_rtrace.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/debugging_rtrace_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/debugging_rtrace.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pWWnDohq5NnNR3pQZ_002fb4r7Q" class="ww_skin_page_body" style="background-attachment: scroll; background-image: url(&quot;watermark.png&quot;); background-position: center center; background-repeat: no-repeat; margin-left: 0pt; margin-right: 10pt" onload="Page.OnLoad('../index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/debugging_rtrace.html');"><header id="wwconnect_header"><div><table width="100%" align="center" summary=""><tr><td class="Header_Left"><img alt="NVIDIA Tegra" src="images/NVLogo_2D_H.jpg" width="204" height="44" border="0" /></td><td class="Header_Right"><div>NVIDIA Tegra Linux Driver Package</div><br />
           Development Guide <br /><font size="-1"><div>28.2 Release</div></font><br /></td></tr></table></div><!--     <br clear="all" />
 --><hr color="#DEE4F0" /><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwpID0EXHA" class="Heading_2_Top">Debugging with Register Trace Buffers</div><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/debugging_rtrace.html#wwpID0ELHA">Locating RTRACE Output</a></div></dd></dl></div><div id="wwpID0EWHA" class="Body_Text">RTRACE can be used to determine what register access happened before a reset or panic. With RTRACE, kernel traces trigger read/write calls into a persistent register trace buffer that can be decoded and dumped after reboot, using the pstore file system. Tegra RTRACE does not require ramdump. It prints parsed output from the device directly.</div><div id="wwpID0EVHA" class="Heading_5">To enable RTRACE</div><div id="wwpID0EUHA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Add the following to the kernel configuration:</div><div id="wwpID0ETHA" class="Code">CONFIG_PSTORE_RTRACE=y</div><div id="wwpID0ESHA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Along with the above macro, also add the following to start RTRACE automatically:</div><div id="wwpID0ERHA" class="Code">CONFIG_PSTORE_RTRACE_ENABLE_AT_STARTUP=y</div><div id="wwpID0EQHA" class="Heading_5">To start and stop RTRACE</div><div id="wwpID0EPHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>To start RTRACE, enter the command:</div><div id="wwpID0EOHA" class="Code">$ echo 1 &gt; /sys/kernel/debug/pstore/record_rtrace</div><div id="wwpID0ENHA" class="List_Continue">To stop RTRACE, enter the command:</div><div id="wwpID0EMHA" class="Code">$ echo 0 &gt; /sys/kernel/debug/pstore/record_rtrace</div><div id="wwpID0ELHA" class="Heading_3">Locating RTRACE Output</div><div id="wwpID0EKHA" class="Body_Text">Output from RTRACE is available after reboot in the following file on the device:</div><div id="wwpID0EJHA" class="Code">/sys/fs/pstore/rtrace-ramoops</div><div id="wwpID0EIHA" class="Body_Text">RTRACE output is similar to the following:</div><div id="wwpID0EHHA" class="Code">0  R  fe406314 &lt;- c038df4c  mem_serial_in+0x2c/0x38</div><div id="wwpID0EGHA" class="Code">0  R  fe406314 &lt;- c038df4c  mem_serial_in+0x2c/0x38</div><div id="wwpID0EFHA" class="Code">0  R  fe406314 &lt;- c038df4c  mem_serial_in+0x2c/0x38</div><div id="wwpID0EEHA" class="Code">0  R  fe406314 &lt;- c038df4c  mem_serial_in+0x2c/0x38</div><div id="wwpID0EDHA" class="Code">0  W  fe406304 &lt;- c038df18  mem_serial_out+0x30/0x38</div><div id="wwpID0EBHA" class="Body_Text">&nbsp;</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /><hr color="#DEE4F0" /><table width="90%" align="center" summary=""><tr><td class="Footer_Left"><font color="gray"><b></b><br />
           Subject to Change | © 2017 by NVIDIA Corporation.
           All rights reserved.
        </font></td><td class="Footer_Right"><font color="gray"><div>PR-06076-R28</div><br /><div style="text-align: center; font-weight: bold;"><div>Revised: 05 Mar 2018 16:32:32</div></div></font></td></tr></table></footer></body></html>