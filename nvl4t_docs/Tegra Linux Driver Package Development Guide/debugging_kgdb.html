<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Debugging the Kernel on Tegra Devices</title><link rel="Prev" href="debugging_PTM.html" title="Previous" /><link rel="Next" href="opengl_egl_test_app.html" title="Next" /><link rel="StyleSheet" href="css/debugging_kgdb.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/debugging_kgdb_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/debugging_kgdb.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="ptvIa67lIP9gSNWJiQK5bjg" class="ww_skin_page_body" style="background-attachment: scroll; background-image: url(&quot;watermark.png&quot;); background-position: center center; background-repeat: no-repeat; margin-left: 0pt; margin-right: 10pt" onload="Page.OnLoad('../index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/debugging_kgdb.html');"><header id="wwconnect_header"><div><table width="100%" align="center" summary=""><tr><td class="Header_Left"><img alt="NVIDIA Tegra" src="images/NVLogo_2D_H.jpg" width="204" height="44" border="0" /></td><td class="Header_Right"><div>NVIDIA Tegra Linux Driver Package</div><br />
           Development Guide <br /><font size="-1"><div>28.2 Release</div></font><br /></td></tr></table></div><!--     <br clear="all" />
 --><hr color="#DEE4F0" /><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwpID0E0FE0HA" class="Heading_2_Top">Debugging the Kernel on Tegra Devices</div><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/debugging_kgdb.html#wwpID0E06D0HA">Reconfiguring and Rebuilding the Kernel</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/debugging_kgdb.html#wwpID0E0ND0HA">Modifiying the Configuration Files</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/debugging_kgdb.html#wwpID0E03C0HA">Using KGDB</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/debugging_kgdb.html#wwpID0E0YC0HA">At Boot: Kernel Command Line</a></div></dd></dl></dl></div><div id="wwpID0E0EE0HA" class="Body_Text">This topic describes how to use the Linux kernel source-level debugger (KGDB) for debugging the  Linux Kernel on Tegra devices. </div><div id="wwpID0E0DE0HA" class="Body_Text">Detailed information about KGDB is available at:</div><div id="wwpID0E0CE0HA" class="Code"><span class="Hyperlink"><a href="https://www.kernel.org/doc/htmldocs/kgdb/index.html" target="external_window">https://www.kernel.org/doc/htmldocs/kgdb/index.html</a></span> </div><div id="wwpID0E0BE0HA" class="Body_Text">Using KGDB requires a host system with a serial connection to the target device to be debugged. This allows live source-level debugging of the kernel operation to set breakpoints and trace errors back through the source calls. </div><div id="wwpID0E0AE0HA" class="Body_Text">KGDB cannot be used to trace system calls and other types of processes. A tracer must be used for that type of debugging. </div><div id="wwpID0E06D0HA" class="Heading_3">Reconfiguring and Rebuilding the Kernel</div><div id="wwpID0E05D0HA" class="Body_Text">To use KGDB, you must reconfigure and rebuild the kernel for KGDB. This requires connecting it to GDB, and using a serial port terminal for debugging. </div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 45.9pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA04D0HA" class="Note_Image">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 342pt"><div id="wwpID0EAAA04D0HA" class="Note_Text">To debug devices outfitted with the 64-bit version of<span class="Key" style="border-bottom-color: #000000; border-bottom-style: none; border-bottom-width: 0pt; border-left-color: #000000; border-left-style: none; border-left-width: 0pt; border-right-color: #000000; border-right-style: none; border-right-width: 0pt; border-top-color: #000000; border-top-style: none; border-top-width: 0pt"> NVIDIA</span><span class="Key" style="border-bottom-color: #000000; border-bottom-style: none; border-bottom-width: 0pt; border-left-color: #000000; border-left-style: none; border-left-width: 0pt; border-right-color: #000000; border-right-style: none; border-right-width: 0pt; border-top-color: #000000; border-top-style: none; border-top-width: 0pt; vertical-align: super">®&nbsp;</span><span class="Key" style="border-bottom-color: #000000; border-bottom-style: none; border-bottom-width: 0pt; border-left-color: #000000; border-left-style: none; border-left-width: 0pt; border-right-color: #000000; border-right-style: none; border-right-width: 0pt; border-top-color: #000000; border-top-style: none; border-top-width: 0pt">Tegra</span><span class="Key" style="border-bottom-color: #000000; border-bottom-style: none; border-bottom-width: 0pt; border-left-color: #000000; border-left-style: none; border-left-width: 0pt; border-right-color: #000000; border-right-style: none; border-right-width: 0pt; border-top-color: #000000; border-top-style: none; border-top-width: 0pt; vertical-align: super">®&nbsp;</span> processor, you need GDB 7.0 to connect to KGDB, due to AARCH64 requirements.The L4T BSP supports GDB 7.7 by default. GDB 7.8 also works; however it is not fully tested.</div></td></tr></table></div><div id="wwpID0E03D0HA" class="Body_Text">Before rebuilding your kernel, you must determine if the default kernel configuration file must be modified to enable KGDB configuration. </div><div id="wwpID0E02D0HA" class="Heading_5">To determine if the Kernel configuration must be modified:</div><div id="wwpID0E01D0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Execute the command:</div><div id="wwpID0E0ZD0HA" class="Code">#zcat /proc/config.gz | egrep 'CONFIG_KGDB|IKCONFIG|CONFIG_WATCHDOG'</div><div id="wwpID0E0YD0HA" class="List_Continue">If your current kernel has all the requisite KGDB features enabled, the following <span class="Strong">exact</span> output is returned:</div><div id="wwpID0E0XD0HA" class="Code">CONFIG_IKCONFIG=y</div><div id="wwpID0E0WD0HA" class="Code">CONFIG_IKCONFIG_PROC=y</div><div id="wwpID0E0VD0HA" class="Code"># CONFIG_WATCHDOG is not set</div><div id="wwpID0E0UD0HA" class="Code">CONFIG_KGDB=y</div><div id="wwpID0E0TD0HA" class="Code">CONFIG_KGDB_SERIAL_CONSOLE=y</div><div id="wwpID0E0SD0HA" class="Code"># CONFIG_KGDB_TESTS is not set</div><div id="wwpID0E0RD0HA" class="Code"># CONFIG_KGDB_KDB is not set</div><div id="wwpID0E0QD0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>If the output identifies that <span class="Code_Char">/proc/config.gz</span> does not exist, your current kernel was not compiled with <span class="Code_Char">CONFIG_IKCONFIG_PROC</span> set. If so, recompile the kernel with <span class="Code_Char">CONFIG_IKCONFIG_PROC </span>set. </div><div id="wwpID0E0PD0HA" class="List_Continue">The general instructions for reconfiguring and rebuilding the Linux kernel for KGDB are available at: </div><div id="wwpID0E0OD0HA" class="Code"><span class="Hyperlink"><a href="https://www.kernel.org/doc/htmldocs/kgdb/CompilingAKernel.html" target="external_window">https://www.kernel.org/doc/htmldocs/kgdb/CompilingAKernel.html</a></span><span class="Hyperlink" style="color: #000000"> </span></div><div id="wwpID0E0ND0HA" class="Heading_3">Modifiying the Configuration Files</div><div id="wwpID0E0MD0HA" class="Body_Text">For the L4T Linux kernel running on Tegra devices, some specific configuration files must modified, depending on the target device. </div><div id="wwpID0E0LD0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Select the configuration file based on your target device. </div><div id="wwpID0E0KD0HA" class="List_Continue">For example, for T186 boards running L4T, the configuration file is:</div><div id="wwpID0E0JD0HA" class="Code">tegra18_defconfig</div><div id="wwpID0E0ID0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Setup the L4T build environment and execute these commands within the kernel directory: </div><div id="wwpID0E0HD0HA" class="Code">cd $TEGRA_TOP/kernel/kernel-4.4</div><div id="wwpID0E0GD0HA" class="Code">export ARCH=arm64</div><div id="wwpID0E0FD0HA" class="Code">make DEFCONFIG_PATH=arch/arm64/configs tegra18_defconfig</div><div id="wwpID0E0ED0HA" class="Code">make menuconfig</div><div id="wwpID0E0DD0HA" class="Code">&lt;&lt;Update config options&gt;&gt;</div><div id="wwpID0E0CD0HA" class="Code">make savedefconfig</div><div id="wwpID0E0BD0HA" class="Code">cp -v defconfig arch/arm64/configs/tegra18_defconfig</div><div id="wwpID0E0AD0HA" class="Code">make mrproper</div><div id="wwpID0E06C0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Rebuild the kernel using the new configuration file by executing the command: </div><div id="wwpID0E05C0HA" class="Code">tmp kernel</div><div id="wwpID0E04C0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Flash the new kernel on the target Tegra device to be debugged. </div><div id="wwpID0E03C0HA" class="Heading_3">Using KGDB</div><div id="wwpID0E02C0HA" class="Body_Text">To use KGDB, you must attach it to GDB. KGDB must be set up to be attached using one of two methods, depending on the state of the system: </div><div id="wwpID0E01C0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>At boot, using the kernel command line</div><div id="wwpID0E0ZC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>If the system is already running, using a system request trigger to KGDB to wait for a GDB connection</div><div id="wwpID0E0YC0HA" class="Heading_4">At Boot: Kernel Command Line</div><div id="wwpID0E0XC0HA" class="Body_Text">To create a custom kernel boot command line for KGDB, the command line must include: </div><div id="wwpID0E0WC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The terminal device used for debugging</div><div id="wwpID0E0VC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The baud rate of the serial connection between the host and the target device</div><div id="wwpID0E0UC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The kgdbwait command</div><div id="wwpID0E0TC0HA" class="Heading_5">To find the existing command line</div><div id="wwpID0E0SC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>To see the command line, execute the command:</div><div id="wwpID0E0RC0HA" class="Code">cat /proc/cmdline</div><div id="wwpID0E0QC0HA" class="Heading_5">To modify the command line for KGDB</div><div id="wwpID0E0PC0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Add the following arguments to the kernel command line:</div><div id="wwpID0E0OC0HA" class="Code">console=ttyS0,115200n8 kgdboc=ttyS0,115200 kgdbwait</div><div id="wwpID0E0NC0HA" class="Normal" style="margin-bottom: 12pt; margin-left: 54pt; margin-top: 12pt">Where: </div><div id="wwpID0E0MC0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span style="font-family: &quot;Courier New&quot;">&lt;terminal&gt;</span> is the terminal device for debugging.  </div><div id="wwpID0E0LC0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span style="font-family: &quot;Courier New&quot;">&lt;baud_rate&gt;</span> is the baud rate of the serial connection between the host and the target device to be debugged.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 54pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0KC0HA" class="Note_Image" style="text-align: left">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 324.9pt"><div id="wwpID0EBAA0KC0HA" class="Note_Text">Verify that the baud rate is the same for both the host and target device. Any type of connection that can work like an RS-232 serial connection can be used, including USB connections that are bridged or can tunnel serial data. </div><div id="wwpID0EAAA0KC0HA" class="Note_Text">The kgdboc parameter sets the target device to use ttyS0. On the host you need to find which serial port or USB port you are receiving boot messages on. This will be the same port that you will use for your GDB host.</div></td></tr></table></div><div id="wwpID0E0JC0HA" class="List_Continue">With above arguments, target boot waits for connection from remote gdb after below prints.</div><div id="wwpID0E0IC0HA" class="Code">[    2.368148] console [ttyS0] enabled</div><div id="wwpID0E0HC0HA" class="Code">[    2.368148] console [ttyS0] enabled</div><div id="wwpID0E0GC0HA" class="Code">[    2.375339] bootconsole [uart0] disabled</div><div id="wwpID0E0FC0HA" class="Code">[    2.375339] bootconsole [uart0] disabled</div><div id="wwpID0E0EC0HA" class="Code">[    2.383940] KGDB: Registered I/O driver kgdboc</div><div id="wwpID0E0DC0HA" class="Code">[    2.402324] KGDB: Waiting for connection from remote gdb...</div><div id="wwpID0E0CC0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>If you are using same serial line for both console and debug, at this point, you can disconnect the terminal application. For example, minicom.</div><div id="wwpID0E0BC0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Connect from GDB in the usual way by executing these commands on host:</div><div id="wwpID0E0AC0HA" class="Code">$TEGRA_TOP/prebuilts/gcc/linux-x86/aarch64/aarch64-linux-android-4.9/bin/aarch64-linux-android-gdb $TEGRA_TOP/out/l4t-t186ref-debug-aarch64/nvidia/kernel/vmlinux</div><div id="wwpID0E06B0HA" class="Body_Text_Indent">or </div><div id="wwpID0E05B0HA" class="Code">sudo `which &lt;gdb_name&gt;` $TEGRA_TOP/out/l4t-t186ref-debug-aarch64/nvidia/kernel/vmlinux</div><div id="wwpID0E04B0HA" class="Code">set remotebaud 115200</div><div id="wwpID0E03B0HA" class="Code">target remote /dev/&lt;tty_device&gt;</div><div id="wwpID0E02B0HA" class="Body_Text_Indent">Where:</div><div id="wwpID0E01B0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;gdb_name&gt;</span> is the name of the correct GDB executable on your machine.</div><div id="wwpID0E0ZB0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;tty_device&gt;</span> is the host output device configured for GDB.</div><div id="wwpID0E0YB0HA" class="Code_Indent">target remote /dev/&lt;tty_device&gt;</div><div id="wwpID0E0XB0HA" class="List_Continue_2">For example:</div><div id="wwpID0E0WB0HA" class="Code">	(gdb) target remote /dev/ttyUSB2</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 54pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0VB0HA" class="Note_Image" style="text-align: left">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 324.9pt"><div id="wwpID0EBAA0VB0HA" class="Note_Text">For GDB 7.8, use the following instead of the last line shown in the preceding example:</div><div id="wwpID0EAAA0VB0HA" class="Note_Text">set serial baud 115200</div></td></tr></table></div><div id="wwpID0E0UB0HA" class="Body_Text">In the above example, the terminal is connected through a USB port at:</div><div id="wwpID0E0TB0HA" class="Code">/dev/ttyUSB2 </div><div id="wwpID0E0SB0HA" class="Body_Text">To connect through a standard serial port, replace the USB device number with a serial port number such as:</div><div id="wwpID0E0RB0HA" class="Code"> /dev/ttyS0</div><div id="wwpID0E0QB0HA" class="Body_Text">Generally, it will be the same port as the one you receive boot messages through.</div><div id="wwpID0E0PB0HA" class="Heading_5">To trigger KGDB to Wait for GDB Connection on a system that is running</div><div id="wwpID0E0OB0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Open a terminal window.</div><div id="wwpID0E0NB0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Enable the KGDB console on the configured terminal device at the configured baud rate. </div><div id="wwpID0E0MB0HA" class="Heading_5">To enable the KGDB console</div><div id="wwpID0E0LB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>On the target, execute the command:</div><div id="wwpID0E0KB0HA" class="Code">sudo su</div><div id="wwpID0E0JB0HA" class="Code"># echo ttyS0,115200 &gt; /sys/module/kgdboc/parameters/kgdboc</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 54pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABA0IB0HA" class="Note_Image" style="text-align: left">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 324.9pt"><div id="wwpID0EAAA0IB0HA" class="Note_Text">This sets the target device to use ttyS0. On the host, you must find which serial port or USB port you are receiving boot messages on. This will be the same port that you will use for your GDB host.</div></td></tr></table></div><div id="wwpID0E0HB0HA" class="List_Continue">If you were already connected to the serial console with minicom or screen then you will see:</div><div id="wwpID0E0GB0HA" class="Code">[ 60.206779] kgdb: Registered I/O driver kgdboc.</div><div id="wwpID0E0FB0HA" class="Heading_5">To signal KGDB to break</div><div id="wwpID0E0EB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Execute the command:</div><div id="wwpID0E0DB0HA" class="Code"># echo -n g &gt; /proc/sysrq-trigger</div><div id="wwpID0E0CB0HA" class="Code">This will give below print on console.</div><div id="wwpID0E0BB0HA" class="Code" style="text-indent: 18pt">[   68.398684] sysrq: SysRq : DEBUG</div><div id="wwpID0E0AB0HA" class="Code" style="text-indent: 18pt">[   68.402103] KGDB: Entering KGDB</div><div id="wwpID0E6HA" class="Heading_5">To attach GDB to KGDB </div><div id="wwpID0E5HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>On the host, execute the command: </div><div id="wwpID0E4HA" class="Code">sudo `which &lt;gdb_name&gt;` $OUT/obj/KERNEL/vmlinux</div><div id="wwpID0E3HA" class="Code">set remotebaud 115200</div><div id="wwpID0E2HA" class="Code">target remote /dev/&lt;tty_device$TEGRA_TOP/prebuilts/gcc/linux-x86/aarch64/aarch64-linux-android-4.9/bin/aarch64-linux-android-gdb $TEGRA_TOP/out/l4t-t186ref-debug-aarch64/nvidia/kernel/vmlinux</div><div id="wwpID0E1HA" class="List_Continue">Or</div><div id="wwpID0EZHA" class="Code">sudo `which &lt;gdb_name&gt;` $TEGRA_TOP/out/l4t-t186ref-debug-aarch64/nvidia/kernel/vmlinux</div><div id="wwpID0EYHA" class="Code">set remotebaud 115200</div><div id="wwpID0EXHA" class="Code">target remote /dev/&lt;tty_device&gt;</div><div id="wwpID0EWHA" class="Code">e.g:	(gdb) target remote /dev/ttyUSB2</div><div id="wwpID0EVHA" class="List_Continue">Where: </div><div id="wwpID0EUHA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;gdb_name&gt;</span> is the name of the correct GDB executable on your machine. </div><div id="wwpID0ETHA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Code_Char">&lt;tty_device&gt;</span> is the host output device configured for GDB.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 54pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 49.5pt"><div id="wwpID0EABASHA" class="Note_Image" style="text-align: left">Note:</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 324.9pt"><div id="wwpID0EAAASHA" class="Note_Text">Note: For GDB 7.8, use the following instead of the last line shown in the preceding example:</div></td></tr></table></div><div id="wwpID0ERHA" class="Code">&nbsp;</div><div id="wwpID0EQHA" class="Code">set serial baud 115200</div><div id="wwpID0EPHA" class="Code">&nbsp;</div><div id="wwpID0EOHA" class="Body_Text_Indent">In the above example, the terminal is connected through a USB port such as:</div><div id="wwpID0ENHA" class="Code">/dev/ttyUSB2</div><div id="wwpID0EMHA" class="Body_Text_Indent">To connect through a standard serial port, replace the USB device number with a serial port number such as:</div><div id="wwpID0ELHA" class="Code"> /dev/ttyS0</div><div id="wwpID0EKHA" class="Body_Text_Indent">Generally, it will be the same port as the one you receive boot messages through. </div><div id="wwpID0EJHA" class="Body_Text">To save typing each time you connect GDB to KGDB, define a <span class="Code_Char">dbgattach</span> alias for them in a <span class="Code_Char">.gdbinit</span> file:</div><div id="wwpID0EIHA" class="Code">cat &gt;~/.gdbinit &lt;&lt; "EOF"</div><div id="wwpID0EHHA" class="Code">define dbgattach</div><div id="wwpID0EGHA" class="Code">   echo set remotebaud 115200 \n</div><div id="wwpID0EFHA" class="Code">        set remotebaud 115200</div><div id="wwpID0EEHA" class="Code">   echo target remote /dev/&lt;tty_device&gt; \n</div><div id="wwpID0EDHA" class="Code">        target remote /dev/&lt;tty_device&gt;</div><div id="wwpID0ECHA" class="Code">end</div><div id="wwpID0EBHA" class="Code">EOF</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /><hr color="#DEE4F0" /><table width="90%" align="center" summary=""><tr><td class="Footer_Left"><font color="gray"><b></b><br />
           Subject to Change | © 2017 by NVIDIA Corporation.
           All rights reserved.
        </font></td><td class="Footer_Right"><font color="gray"><div>PR-06076-R28</div><br /><div style="text-align: center; font-weight: bold;"><div>Revised: 05 Mar 2018 16:32:33</div></div></font></td></tr></table></footer></body></html>