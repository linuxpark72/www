<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Tegra ASoC Driver for Jetson TX1 and TX2</title><link rel="Prev" href="config_setup.html" title="Previous" /><link rel="Next" href="WDT_proc.html" title="Next" /><link rel="StyleSheet" href="css/asoc_driver.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/asoc_driver_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pkwrsySU2b9p1gh_002bMOIylFw" class="ww_skin_page_body" style="background-attachment: scroll; background-image: url(&quot;watermark.png&quot;); background-position: center center; background-repeat: no-repeat; margin-left: 0pt; margin-right: 10pt" onload="Page.OnLoad('../index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html');"><header id="wwconnect_header"><div><table width="100%" align="center" summary=""><tr><td class="Header_Left"><img alt="NVIDIA Tegra" src="images/NVLogo_2D_H.jpg" width="204" height="44" border="0" /></td><td class="Header_Right"><div>NVIDIA Tegra Linux Driver Package</div><br />
           Development Guide <br /><font size="-1"><div>28.2 Release</div></font><br /></td></tr></table></div><!--     <br clear="all" />
 --><hr color="#DEE4F0" /><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwpID0E0RM0HA" class="Heading_2_Top">Tegra ASoC Driver for Jetson TX1 and TX2</div><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0NM0HA">ALSA</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0BM0HA">DAPM</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0YL0HA">Device Tree</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0SL0HA">Audio Driver</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0OL0HA">Tegra Audio Hub</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0RK0HA">Software Architecture</a></div></dd></dl><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0GK0HA">Tegra Platform Driver</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0DK0HA">ADMAIF</a></div></dd></dl><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0XJ0HA">Tegra Codec Driver</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0SJ0HA">XBAR</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0MJ0HA">AMX</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0IJ0HA">ADX</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0EJ0HA">I2S</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0AJ0HA">Mixer</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E03I0HA">SFC</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0YI0HA">ASRC</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0TI0HA">SPDIF</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0PI0HA">DMIC</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0LI0HA">MVC</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0EI0HA">OPE</a></div></dd></dl><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0AI0HA">DSPK</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E03H0HA">Tegra Machine Driver</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E03F0HA">Dynamic Audio Routing</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0ZF0HA">Codec Driver Instantiation Using Device Tree</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0CF0HA">Clocking and Power Management</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0WD0HA">Audio Playback/Record Examples</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0TD0HA">Troubleshooting</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0ZB0HA">Examples</a></div></dd><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0VB0HA">ADMAIF</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0MB0HA">I2S</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0ERHA">DMIC</a></div></dd></dl></dl></div><div id="wwpID0E0QM0HA" class="Body_Text">The NVIDIA<span style="vertical-align: super">®</span> Tegra<span style="vertical-align: super">®</span> ASoC driver is implemented for the Android and Linux operating systems and is intended to work seamlessly with different Tegra devices, using an existing framework called Advanced Linux Sound Architecture (ALSA), which is maintained by the upstream Linux community.</div><div id="wwpID0E0PM0HA" class="Body_Text">The hardware functionality present on Jetson TX1 and Jetson TX2. Hardware functionality may not be supported by the software. Review your software documentation to determine availability of software for audio features.</div><div id="wwpID0E0OM0HA" class="Body_Text">On Jetson TX1 and TX2, audio output is supported using HDMI audio. Hardware for audio capture is NOT included in the development kit; however audio capture can be supported using the interfaces such as USB, I2S, or DMIC.</div><div id="wwpID0E0NM0HA" class="Heading_3">ALSA</div><div id="wwpID0E0MM0HA" class="Body_Text">The ALSA framework is a part of the Linux kernel that is supported and maintained by the larger Linux community. This makes it feasible to adapt to the framework, designing a driver that leverages NVIDIA audio routing support. ALSA includes a collection of sound card drivers, including actual codec drivers for platform ADC and DAC support, and can support adding new codec drivers.</div><div id="wwpID0E0LM0HA" class="Body_Text">ALSA also includes libraries and utilities that enable more refined audio control in Linux and Android user space. These libraries control audio applications without having to interact with kernel space drivers. These libraries include ALSA:</div><div id="wwpID0E0KM0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>amixer</div><div id="wwpID0E0JM0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>aplay</div><div id="wwpID0E0IM0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>arecord</div><div id="wwpID0E0HM0HA" class="Body_Text">The ALSA software hierarchy is as follows.</div><div class="ww_skin_page_overflow"><div id="wwpID0E0GM0HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image2_3.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" /></div></div><div id="wwpID0E0FM0HA" class="Body_Text">User space ALSA applications interact with ALSA core (kernel space) through APIs provided by userspace libraries that initialize the actual hardware codecs at the backend of the audio pipeline.</div><div id="wwpID0E0EM0HA" class="Body_Text">More information on the ALSA framework is available at:</div><div id="wwpID0E0DM0HA" class="Code"><span class="Hyperlink"><a href="http://www.alsa-project.org/main/index.php/Main_Page" target="external_window">http://www.alsa-project.org/main/index.php/Main_Page</a></span></div><div id="wwpID0E0CM0HA" class="Code"><span class="Weblink">https://wiki.archlinux.org/index.php/Advanced_Linux_Sound_Architecture</span></div><div id="wwpID0E0BM0HA" class="Heading_3">DAPM</div><div id="wwpID0E0AM0HA" class="Body_Text">ALSA is designed to support various functionalities including, but not limited to, dynamic audio routing to the available PCM devices. The component of ALSA core that provides this support is Dynamic Audio Power Management (DAPM). DAPM controls the power flow into and out of various codec blocks in the audio subsystem, thereby minimizing power consumption. DAPM introduces switches or kernel controls in the form of widgets to turn ON/OFF the power of a module and help manipulate the required bit of the specific register dynamically using user space applications such as aplay, arecord, or alsamixer. The widgets are classified into various groups. </div><div id="wwpID0E06L0HA" class="Body_Text">More information on the widgets and their applications is available at:</div><div id="wwpID0E05L0HA" class="Code"><span class="Weblink"><a href="http://www.alsa-project.org/main/index.php/DAPM" target="external_window">http://www.alsa-project.org/main/index.php/DAPM</a></span></div><div id="wwpID0E04L0HA" class="Code"><span class="Weblink">https://www.kernel.org/doc/Documentation/sound/alsa/soc/DPCM.txt</span></div><div id="wwpID0E03L0HA" class="Body_Text">In terms of software hierarchy, DAPM is part of the ALSA core that manages the codec module power efficiency. Consult the<span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0GM0HA" title="Tegra ASoC Driver for Jetson TX1 and TX2">Tegra ASoC Driver Overview</a></span> diagram for details. </div><div id="wwpID0E02L0HA" class="Body_Text">For more information consult:</div><div id="wwpID0E01L0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0CF0HA" title="Tegra ASoC Driver for Jetson TX1 and TX2">Clocking and Power Management</a></span> </div><div id="wwpID0E0ZL0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E03F0HA" title="Tegra ASoC Driver for Jetson TX1 and TX2">Dynamic Audio Routing</a></span></div><div id="wwpID0E0YL0HA" class="Heading_3">Device Tree</div><div id="wwpID0E0XL0HA" class="Body_Text">The Device Tree is a data structure that describes devices on the platform. It is passed to the operating system at boot time to avoid hard coding component details in the operating system. In this way it makes it easier to change hardware configurations without rebuilding the kernel.</div><div id="wwpID0E0WL0HA" class="Body_Text">The data structure contains the name of nodes and properties. Each node can have properties or child nodes, and each property is comprised of a name and more than one value. Device Tree structures must be written in the correct format and according to format rules so that the data structure can be parsed by the operating system.</div><div id="wwpID0E0VL0HA" class="Body_Text">Usage details of DTS and its script format is available at:</div><div id="wwpID0E0UL0HA" class="Code"><span class="Hyperlink"><a href="http://www.devicetree.org/Device_Tree_Usage" target="external_window">http://www.devicetree.org/Device_Tree_Usage</a></span></div><div id="wwpID0E0TL0HA" class="Body_Text">A simple device tree example is available at <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0ZF0HA" title="Tegra ASoC Driver for Jetson TX1 and TX2">Codec Driver Instantiation Using Device Tree</a></span>.</div><div id="wwpID0E0SL0HA" class="Heading_3">Audio Driver</div><div id="wwpID0E0RL0HA" class="Body_Text">The Tegra Audio Driver leverages Tegra Audio Hub (AHUB) hardware acceleration in the form of platform and codec drivers. The ARM peripheral bus interface (ADMAIF) is implemented as a platform driver with PCM interfaces for playback/record and the rest of the AHUB modules such as the Audio Cross Bar (XBAR), Audio Multiplexer (AMX), Audio Demultiplexer (ADX) and Inter-IC sound (I2S) implemented as codec drivers. Each of the drivers is connected to XBAR through Digital Audio Interfaces (DAIs), inside a machine driver, forming an audio hub.</div><div id="wwpID0E0QL0HA" class="Body_Text">The machine driver probe instantiates the sound card device and registers all the PCM interfaces as exposed by ADMAIF. After booting, before using these interfaces to playback or record audio, the audio paths inside XBAR must be setup. By default, XBAR has no routing connections at boot, and no DAPM path is complete to power on the corresponding widgets. The XBAR driver introduces MUX widgets for all the audio components and enables creation of custom routing through kcontrol from user space using the ALSA amixer utility. If the audio path is not complete, the DAPM path is not closed. Hardware settings are not applied and audio output may not be heard.</div><div id="wwpID0E0PL0HA" class="Body_Text">For more details on how to setup the route and how to play or record on the PCM interfaces, see the <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0WD0HA" title="Tegra ASoC Driver for Jetson TX1 and TX2">Audio Playback/Record Examples</a></span>.</div><div id="wwpID0E0OL0HA" class="Heading_3">Tegra Audio Hub</div><div id="wwpID0E0NL0HA" class="Body_Text">This topic provides an overview of:</div><div id="wwpID0E0ML0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The audio hub hardware architecture inside the the Tegra SoC.</div><div id="wwpID0E0LL0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The software architecture of the driver.</div><div id="wwpID0E0KL0HA" class="Heading_5">Tegra Audio Hub Architecture </div><div class="ww_skin_page_overflow"><div id="wwpID0E0JL0HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/asoc_driver.1.02.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" /></div></div><div id="wwpID0E0IL0HA" class="Normal">&nbsp;</div><div id="wwpID0E0HL0HA" class="Body_Text">The audio hub contains the modules I2S, SPDIF, and the Digital MIC Controller (DMIC) that interface with the external world. The audio hub also contains:</div><div id="wwpID0E0GL0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Mixer</div><div id="wwpID0E0FL0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Sampling Frequency Converter (SFC)</div><div id="wwpID0E0EL0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Master Volume Control (MVC)</div><div id="wwpID0E0DL0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Output Processing Engine (OPE)</div><div id="wwpID0E0CL0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Audio Multiplexers (AMX)</div><div id="wwpID0E0BL0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Audio Demultiplexers (ADX)</div><div id="wwpID0E0AL0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Audio Flow Controllers (AFC)</div><div id="wwpID0E06K0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>An Audio Direct Memory Access (ADMA) component is included (ADMAIF-DMA) to communicate with memory. </div><div id="wwpID0E05K0HA" class="Body_Text">The Crossbar (XBAR) facilitates the routing of audio samples through these modules using a proprietary protocol called Audio Client Interface (ACIF).</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 41.75pt" cellspacing="0" summary=""><tr><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 84.1pt"><div id="wwpID0EACR04K0HA" class="Cell_Heading">Module</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 160.75pt"><div id="wwpID0EBBR04K0HA" class="Cell_Heading">Jetson TX1 Instances</div><div id="wwpID0EABR04K0HA" class="Cell_Heading">(T210)</div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 160.7pt"><div id="wwpID0EBAR04K0HA" class="Cell_Heading">Jetson TX2 Instances</div><div id="wwpID0EAAR04K0HA" class="Cell_Heading">(T186)</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACQ04K0HA" class="Cell_Text">I2S</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABQ04K0HA" class="Cell_Text">5x</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAQ04K0HA" class="Cell_Text">6x</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACP04K0HA" class="Cell_Text">DMIC Controller</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABP04K0HA" class="Cell_Text">3x</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAP04K0HA" class="Cell_Text">4x</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACO04K0HA" class="Cell_Text">SPDIF</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABO04K0HA" class="Cell_Text">1x</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAO04K0HA" class="Cell_Text">1x</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACN04K0HA" class="Cell_Text">IQC</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABN04K0HA" class="Cell_Text">2x</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAN04K0HA" class="Cell_Text">2x</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACM04K0HA" class="Cell_Text">Mixer</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABM04K0HA" class="Cell_Text">10 inputs, 5 outputs</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAM04K0HA" class="Cell_Text">10 inputs, 5 outputs</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACL04K0HA" class="Cell_Text">AMX</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABL04K0HA" class="Cell_Text">2x</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAL04K0HA" class="Cell_Text">4x</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACK04K0HA" class="Cell_Text">ADX</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABK04K0HA" class="Cell_Text">2x</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAK04K0HA" class="Cell_Text">4x</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACJ04K0HA" class="Cell_Text">SFC</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABJ04K0HA" class="Cell_Text">4x</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAJ04K0HA" class="Cell_Text">4x</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACI04K0HA" class="Cell_Text">AFC</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABI04K0HA" class="Cell_Text">6x</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAI04K0HA" class="Cell_Text">6x</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACH04K0HA" class="Cell_Text">OPE</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABH04K0HA" class="Cell_Text">2x</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAH04K0HA" class="Cell_Text">1x</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACG04K0HA" class="Cell_Text">SPKPROT</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABG04K0HA" class="Cell_Text">1x</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAG04K0HA" class="Cell_Text">1x</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACF04K0HA" class="Cell_Text">MVC</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABF04K0HA" class="Cell_Text">2x</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAF04K0HA" class="Cell_Text">2x</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACE04K0HA" class="Cell_Text">ADMA</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABE04K0HA" class="Cell_Text">22 channels</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAE04K0HA" class="Cell_Text">32 channels</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACD04K0HA" class="Cell_Text">ADMA I/F</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABD04K0HA" class="Cell_Text">10 Tx channels, 10 Rx channels</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAD04K0HA" class="Cell_Text">20 Tx channels, 20 Rx channels</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACC04K0HA" class="Cell_Text">ASRC</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC04K0HA" class="Cell_Text">None</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAC04K0HA" class="Cell_Text">1x</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACB04K0HA" class="Cell_Text">ARAD</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB04K0HA" class="Cell_Text">None</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB04K0HA" class="Cell_Text">1x</div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EACA04K0HA" class="Cell_Text">DSPK</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA04K0HA" class="Cell_Text">None</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA04K0HA" class="Cell_Text">2x</div></td></tr></table></div><div id="wwpID0E03K0HA" class="Body_Text">The modules in the audio hub support various kinds of audio devices that are expected to interface with the application processor, such as:</div><div id="wwpID0E02K0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Cellular baseband devices</div><div id="wwpID0E01K0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Different types of audio CODECs</div><div id="wwpID0E0ZK0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Bluetooth modules</div><div id="wwpID0E0YK0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>A/V receivers</div><div id="wwpID0E0XK0HA" class="Body_Text">The audio hub is capable of supporting the different interface and signal quality requirements of these devices.</div><div id="wwpID0E0WK0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Each of the AHUB modules has at least one RX port and one TX port, and some have more than one, depending on whether they are for duplex flow such as I2S.</div><div id="wwpID0E0VK0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>The RX ports feed off from XBAR and the TX ports are fed back into XBAR, except in the case of I2S where one end feeds of the actual codec. This configuration makes XBAR a switch where an audio input can be fed to multiple outputs depending on use case.</div><div id="wwpID0E0UK0HA" class="Body_Text">Each ADMAIF has TX and RX FIFOs that support simultaneous recording and playback. ADMA transfers the data to the ADMAIF FIFO for all audio routing scenarios.</div><div id="wwpID0E0TK0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For dynamic audio routing examples consult <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0WD0HA" title="Tegra ASoC Driver for Jetson TX1 and TX2">Audio Playback/Record Examples</a></span>.</div><div id="wwpID0E0SK0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>For details on hardware configuration details of each module, consult the <span style="font-style: italic">Tegra Reference Manual</span>.</div><div id="wwpID0E0RK0HA" class="Heading_4">Software Architecture</div><div id="wwpID0E0QK0HA" class="Body_Text">The software architecture of the Tegra ASoC driver is similar to the hardware architecture of the AHUB. It leverages the features supported by the hardware and conforms to the ALSA framework. This ALSA System on a Chip (ASoC) driver is comprised of platform, codec and machine drivers.</div><div id="wwpID0E0PK0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Platform driver: responsible for PCM registration and interfaces with the PCM driver. The ADMAIF is the platform driver.</div><div id="wwpID0E0OK0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Codec driver: any driver that registers <span class="Code_Char">snd_soc_codec_driver</span> structure with the ASoC core can be viewed as the codec driver. </div><div id="wwpID0E0NK0HA" class="List_Bullet_2" style="text-indent: 22.5pt"><span>•	</span>The module must have at least one input and one output. </div><div id="wwpID0E0MK0HA" class="List_Bullet_2" style="margin-left: 72pt; text-indent: -13.5pt"><span class="WebWorks_Number" style="width: 13.5pt"><span>•	</span></span>The structure provides a way to define your own DAPM widgets for power management and kcontrols for register setting from user space. </div><div id="wwpID0E0LK0HA" class="List_Bullet_2" style="margin-left: 72pt; text-indent: -13.5pt"><span class="WebWorks_Number" style="width: 13.5pt"><span>•	</span></span>All other modules except ADMAIF are implemented as codec drivers.</div><div id="wwpID0E0KK0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Machine driver: connects one or more codec drivers and a PCM driver together for a given platform. </div><div id="wwpID0E0JK0HA" class="Body_Text">For details on writing a machine driver and identifying a sound card, consult:<span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0AI0HA" title="Tegra ASoC Driver for Jetson TX1 and TX2">Tegra Machine Driver</a></span>.</div><div id="wwpID0E0IK0HA" class="Body_Text">For details on the kernel documentation for AsoC framework consult:</div><div id="wwpID0E0HK0HA" class="Code"><span class="Hyperlink">https://www.kernel.org/doc/Documentation/sound/alsa/soc/</span></div><div id="wwpID0E0GK0HA" class="Heading_3">Tegra Platform Driver</div><div id="wwpID0E0FK0HA" class="Body_Text">The Tegra platform driver realizes the number of ports of playback and capture possible inside the AHUB. Connect some or all of these ports to form a full audio routing path. </div><div id="wwpID0E0EK0HA" class="Body_Text">For more information on these paths consult <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0WD0HA" title="Tegra ASoC Driver for Jetson TX1 and TX2">Audio Playback/Record Examples</a></span>.</div><div id="wwpID0E0DK0HA" class="Heading_4">ADMAIF</div><div id="wwpID0E0CK0HA" class="Body_Text">In the Tegra ASoC driver, ADMAIF is implemented as a platform driver and interfaces with the PCM driver. The PCM driver helps perform DMA operations by overriding the function pointers exposed by the <span class="Code_Char">snd_pcm_ops</span> structure. The PCM driver is platform agnostic and interacts with the SOC DMA engine upstream APIs. The DMA engine then interacts with the platform specific DMA driver to get the correct DMA settings. The ADMAIF platform driver defines DAIs and registers the same with ASoC core.</div><div id="wwpID0E0BK0HA" class="Body_Text">In Jetson TX2, there are 20 ADMAIFs. Each ADMAIF is bi-directional, facilitating 20 streams of playback and 20 streams of capture.</div><div id="wwpID0E0AK0HA" class="Code">card 1: tegrasndt186ref [tegra-snd-t186ref-mobile-rt565x]</div><div id="wwpID0E06J0HA" class="Heading_5">Playback Hardware Devices in the Tegra alt ASoC Driver</div><div id="wwpID0E05J0HA" class="Code">/dev/snd/pcmC1D[0…..19]p</div><div id="wwpID0E04J0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>ADMA I/F1 is mapped to <span class="Code_Char">pcmC1D0p</span></div><div id="wwpID0E03J0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>ADMA I/F20 is mapped to <span class="Code_Char">pcmC1D19p</span></div><div id="wwpID0E02J0HA" class="Heading_5">Capture Hardware Devices in the Tegra AsoC Driver</div><div id="wwpID0E01J0HA" class="Code">/dev/snd/pcmC1D[0…..19]c</div><div id="wwpID0E0ZJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>ADMA I/F1 is mapped to <span class="Code_Char">pcmC1D0c</span></div><div id="wwpID0E0YJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>ADMA I/F20 is mapped to <span class="Code_Char">pcmC1D19c</span></div><div id="wwpID0E0XJ0HA" class="Heading_3">Tegra Codec Driver</div><div id="wwpID0E0WJ0HA" class="Body_Text">An overview of codec drivers is presented in the <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0OL0HA" title="Tegra ASoC Driver for Jetson TX1 and TX2">Tegra Audio Hub</a></span>. In the Tegra ASoC driver implementation, the rest of the AHUB modules, except ADMAIF, are implemented as codec drivers. Their responsibilities include:</div><div id="wwpID0E0VJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Interface to other modules by defining DAIs.</div><div id="wwpID0E0UJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Define DAPM widgets and establish DAPM routes for dynamic power switching.</div><div id="wwpID0E0TJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Expose additional kcontrols (kernel controls) as needed for user space utilities to dynamically control module behavior.</div><div id="wwpID0E0SJ0HA" class="Heading_4">XBAR</div><div id="wwpID0E0RJ0HA" class="Body_Text">The XBAR codec driver defines RX, TX and MUX widgets for all the interfacing modules such as ADMAIF, AMX, ADX, I2S, SPDIF, DMIC, Mixer, SFC, MVC, OPE and AFC. MUX widgets are permanently routed to the corresponding TX widgets inside the <span class="Code_Char">snd_soc_dapm_route</span> structure.</div><div id="wwpID0E0QJ0HA" class="Body_Text">However, the XBAR interconnections are made by connecting any RX widget block to any MUX widget block as needed using the ALSA amixer utility. The get/put handlers for these widgets are implemented so that audio connections are stored by setting the appropriate bit in the hardware MUX register.</div><div id="wwpID0E0PJ0HA" class="Body_Text">For more information consult:</div><div id="wwpID0E0OJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0WD0HA" title="Tegra ASoC Driver for Jetson TX1 and TX2">Audio Playback/Record Examples</a></span></div><div id="wwpID0E0NJ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span><span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E03F0HA" title="Tegra ASoC Driver for Jetson TX1 and TX2">Dynamic Audio Routing</a></span></div><div id="wwpID0E0MJ0HA" class="Heading_4">AMX</div><div id="wwpID0E0LJ0HA" class="Body_Text">An Audio Multiplexer (AMX) module can multiplex up to 4 streams of 16 channels, 32 bits each, into one time-division multiplexed (TDM) stream of 16 channels and 32 bits. The 4 RX ports of AMX originate from XBAR and 1 TX port feeds into XBAR. The DAPM widgets exposed are as follows. The DAPM routes established using these widgets are shown as dotted lines.</div><div id="wwpID0E0KJ0HA" class="Heading_5">AMX Codec Driver Internals</div><div class="ww_skin_page_overflow"><div id="wwpID0E0JJ0HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image4_5.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" /></div></div><div id="wwpID0E0IJ0HA" class="Heading_4">ADX</div><div id="wwpID0E0HJ0HA" class="Body_Text">An Audio Demultiplexer (ADX) module can de-multiplex a single TDM stream of 16 channels and 32 bits into 4 streams of up to 16 channels, 32 bits each. The 1 RX port of ADX originates from XBAR and 4 TX ports feeds into XBAR. The DAPM widgets exposed are as follows. The DAPM routes established using these widgets are shown as dotted lines.</div><div id="wwpID0E0GJ0HA" class="Heading_5">ADX Codec Driver Internals </div><div class="ww_skin_page_overflow"><div id="wwpID0E0FJ0HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image5_2.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" /></div></div><div id="wwpID0E0EJ0HA" class="Heading_4">I2S</div><div id="wwpID0E0DJ0HA" class="Body_Text">An I2S module supports 6 different modes, the most useful of which are I2S and TDM. When I2S is configured in TDM mode, use AMX and ADX for multiplexing and demultiplexing audio streams. I2S module can be in I2S mode if the physical codec interfaced does not support TDM mode of operation. An I2S codec driver supports bidirectional data flow and thereby defines CIF and DAP RX/TX widgets as follows. The CIF side of I2S, interfaces with XBAR and DAP side interfaces with the physical codec on the given platform. The DAPM routes established using these widgets are shown as dotted lines. I2S modules also expose kernel control to enable internal I2S loopback.</div><div id="wwpID0E0CJ0HA" class="Heading_5">I2S Codec Driver Internals </div><div class="ww_skin_page_overflow"><div id="wwpID0E0BJ0HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image6_2.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" /></div></div><div id="wwpID0E0AJ0HA" class="Heading_4">Mixer</div><div id="wwpID0E06I0HA" class="Body_Text">The Mixer mixes audio streams from any of the 10 XBAR-originating input ports to any of the 5 output ports. The DAPM widgets and routes for Mixer are as follows. The Mixer driver also exposes Rx Gain and Mixer Enable as additional kcontrols to set the volume of each input stream and to globally enable or disable the Mixer itself.</div><div id="wwpID0E05I0HA" class="Heading_5">Mixer Codec Driver Internals</div><div class="ww_skin_page_overflow"><div id="wwpID0E04I0HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image7_2.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" /></div></div><div id="wwpID0E03I0HA" class="Heading_4">SFC</div><div id="wwpID0E02I0HA" class="Body_Text">The Sampling Frequency Converter(SFC) converts the input sampling frequency to the required sampling rate. SFC has one input port and one output port which are connected to XBAR.</div><div id="wwpID0E01I0HA" class="Heading_5">DAPM widgets and routes for SFC</div><div class="ww_skin_page_overflow"><div id="wwpID0E0ZI0HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image8_2.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" /></div></div><div id="wwpID0E0YI0HA" class="Heading_4">ASRC</div><div id="wwpID0E0XI0HA" class="Body_Text">The Arbitrary Sample Rate Converter (ASRC) is a High Quality (HQ) sampling frequency converter. It can handle a wide range of sampling-rate ratios from 1:24 to 24:1, with input and output sample rates in the range of 8 KHz to 192 KHz. Additionally, it supports up to 6 streams of up to 12 total channels.</div><div id="wwpID0E0WI0HA" class="Body_Text">The ASRC has 6 input ports and 6 output ports that are connected to XBAR. The DAPM widgets and routes for ASRC are as follows.</div><div id="wwpID0E0VI0HA" class="Heading_5">ASRC Codec Driver Internals</div><div class="ww_skin_page_overflow"><div id="wwpID0E0UI0HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image9.png" style="display: inline; left: 0pt; top: 0pt" alt="" /></div></div><div id="wwpID0E0TI0HA" class="Heading_4">SPDIF</div><div id="wwpID0E0SI0HA" class="Body_Text">The SPDIF driver is similar to I2S in terms of the DAPM widgets that are exposed and the routing setup. SPDIF is bidirectional and adapts to the sampling rate of the incoming data. The SPDIF is implemented as follows.</div><div id="wwpID0E0RI0HA" class="Heading_5">SPDIF Driver Internals</div><div class="ww_skin_page_overflow"><div id="wwpID0E0QI0HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image10.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" /></div></div><div id="wwpID0E0PI0HA" class="Heading_4">DMIC</div><div id="wwpID0E0OI0HA" class="Body_Text">To avoid the need for a PDM-capable external codec, use pulse-density modulation (PDM) to interface directly to digital microphones and speakers. The DMIC controller implements a converter to convert PDM signals to PCM (Pulse code modulation) signals. The DAPM widgets and routes are as follows.</div><div id="wwpID0E0NI0HA" class="Heading_5">DMIC Driver Internals</div><div class="ww_skin_page_overflow"><div id="wwpID0E0MI0HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image11.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" /></div></div><div id="wwpID0E0LI0HA" class="Heading_4">MVC</div><div id="wwpID0E0KI0HA" class="Body_Text">MVC provides gain or attenuation to a digital signal path. The digital volume control block is a generic block. It can be used for:</div><div id="wwpID0E0JI0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Input or output digital signal path</div><div id="wwpID0E0II0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Per-stream volume control and master volume control</div><div id="wwpID0E0HI0HA" class="Body_Text">The DAPM widgets and routes are as follows.</div><div id="wwpID0E0GI0HA" class="Heading_5">MVC Driver Internals</div><div class="ww_skin_page_overflow"><div id="wwpID0E0FI0HA" class="Caption" style="margin-left: 0pt; text-indent: 36pt"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image12.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" /></div></div><div id="wwpID0E0EI0HA" class="Heading_4">OPE</div><div id="wwpID0E0DI0HA" class="Body_Text">The Output Processing Engine (OPE) is a client of AHUB. OPE contains PEQ and MBDRC which have a scalable number of BiQuad stages, support stereo, 5p1 and 7p1 channels, and meet ultra-low power(ULP) audio requirements. </div><div id="wwpID0E0CI0HA" class="Heading_5">The DAPM widgets and routes for OPE</div><div class="ww_skin_page_overflow"><div id="wwpID0E0BI0HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image13.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" /></div></div><div id="wwpID0E0AI0HA" class="Heading_3">DSPK</div><div id="wwpID0E06H0HA" class="Body_Text">The Digital Speaker (DSPK) is a PDM transmit block that converts multi-bit PCM audio input to over-sampled 1-bit PDM output.</div><div id="wwpID0E05H0HA" class="Heading_5">DSPK Codec Driver Internals</div><div class="ww_skin_page_overflow"><div id="wwpID0E04H0HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image14.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" /></div></div><div id="wwpID0E03H0HA" class="Heading_3">Tegra Machine Driver</div><div id="wwpID0E02H0HA" class="Body_Text">The Tegra machine driver connects the codec drivers by linking the DAIs exposed by each module. It defines the <span class="Code_Char">snd_soc_dai_link</span> structure and instantiates the sound card.</div><div id="wwpID0E01H0HA" class="Body_Text">Machine driver responsibilities include:</div><div id="wwpID0E0ZH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Populate the <span class="Code_Char">snd_soc_dai_link</span> structure with appropriate CPU and CODEC DAIs</div><div id="wwpID0E0YH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Physical codec clock setting (if any) and codec initializations</div><div id="wwpID0E0XH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Master/slave configurations (if any)</div><div id="wwpID0E0WH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Define DAPM widgets to route through the physical codec internals and complete DAPM path as needed</div><div id="wwpID0E0VH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Propagate the runtime sampling frequency to the individual codec drivers as needed</div><div id="wwpID0E0UH0HA" class="Body_Text">To adapt the generic machine driver template to a given platform, you must:</div><div id="wwpID0E0TH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Initialize the platform data structure in the device tree structure file. </div><div id="wwpID0E0SH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Gather information about the hardware platform. </div><div id="wwpID0E0RH0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Identify the physical codecs present on board and the I2S instance they interface with in the hardware. </div><div id="wwpID0E0QH0HA" class="Body_Text">Consult the hardware schematics for the platform.</div><div id="wwpID0E0PH0HA" class="Code">sound_ref {</div><div id="wwpID0E0OH0HA" class="Code">         compatible = " ";</div><div id="wwpID0E0NH0HA" class="Code">         nvidia,model = " ";</div><div id="wwpID0E0MH0HA" class="Code">         nvidia,num-codec-link = &lt; &gt;;</div><div id="wwpID0E0LH0HA" class="Code">&nbsp;</div><div id="wwpID0E0KH0HA" class="Code">         nvidia,audio-routing = ;</div><div id="wwpID0E0JH0HA" class="Code">         nvidia,xbar = &lt;&amp;tegra_axbar&gt;;</div><div id="wwpID0E0IH0HA" class="Code">&nbsp;</div><div id="wwpID0E0HH0HA" class="Code">         nvidia,dai-link-1 {</div><div id="wwpID0E0GH0HA" class="Code">               link-name = " ";</div><div id="wwpID0E0FH0HA" class="Code">               cpu-dai = &lt; &gt;;</div><div id="wwpID0E0EH0HA" class="Code">               codec-dai = &lt; &gt;;</div><div id="wwpID0E0DH0HA" class="Code">               cpu-dai-name = " ";</div><div id="wwpID0E0CH0HA" class="Code">               codec-dai-name = " ";</div><div id="wwpID0E0BH0HA" class="Code">               format = " ";</div><div id="wwpID0E0AH0HA" class="Code">               bitclock-slave;</div><div id="wwpID0E06G0HA" class="Code">               frame-slave;</div><div id="wwpID0E05G0HA" class="Code">               bitclock-noninversion;</div><div id="wwpID0E04G0HA" class="Code">               frame-noninversion;</div><div id="wwpID0E03G0HA" class="Code">               bit-format = " ";</div><div id="wwpID0E02G0HA" class="Code">               bclk_ratio = &lt; &gt;;</div><div id="wwpID0E01G0HA" class="Code">               srate = &lt; &gt;;</div><div id="wwpID0E0ZG0HA" class="Code">               num-channel = &lt; &gt;;</div><div id="wwpID0E0YG0HA" class="Code">               name-prefix = " ";</div><div id="wwpID0E0XG0HA" class="Code">         };</div><div id="wwpID0E0WG0HA" class="Code">   };</div><div id="wwpID0E0VG0HA" class="Body_Text">The <span class="Code_Char">sound</span> node is added to the DT file for sound card registration and passing platform related data. To bind a device driver to a specific device in a DT file, each node must define a <span class="Code_Char">compatible</span> property, which is a list of strings. The optional <span class="Code_Char">nvidia,model</span> property is used for the sound card name. The <span class="Code_Char">nvidia,num-codec-link</span> property shows the number of DAI links exposed outside of the Tegra devices such as I2S, SPDIF or DMIC. This is the same as the number of <span class="Code_Char">nvidia,dai-link-&lt;number&gt;</span> child nodes.</div><div id="wwpID0E0UG0HA" class="Body_Text">The <span class="Code_Char">nvidia,dai-link-&lt;number&gt;</span> node is initialized based on I2S and physical codec links. You can replace the codec with a dummy <span class="Code_Char">spdif-dit.0</span> codec. In that case, you must program the physical codecs at the required sampling rate and operational modes either through a separate utility or by adding necessary <span class="Code_Char">hw_params</span> API calls inside the machine driver. The <span class="Code_Char">link-name</span> property represents each DAI link, and differentiates the codecs connected to the different I2S instances.</div><div id="wwpID0E0TG0HA" class="Body_Text">Slave, frame-slave, format, bitclock-noninverstion and frame-noninversion properties set I2S in I2S/TDM formats and/or master/slave modes. The bclk-ratio property is available to configure the I2S bit clock sample rate. The <span class="Code_Char">srate</span> and <span class="Code_Char">num-channel</span> properties indicate I2S LRCK and the number of channels in one frame. DAPM routes are initialized as established in <span class="Code_Char">nvidia,audio-routing</span> property.</div><div id="wwpID0E0SG0HA" class="Heading_5">To populate the snd_soc_dai_link structure in the machine driver</div><div id="wwpID0E0RG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Initialize all XBAR related DAI links common to any machine driver. Use the APIs in the utility file tegra_asoc_machine_alt.h in the machine driver probe function as shown in the following example:</div><div id="wwpID0E0QG0HA" class="Code">/* get the xbar dai link structure */</div><div id="wwpID0E0PG0HA" class="Code">tegra_machine_dai_links=  </div><div id="wwpID0E0OG0HA" class="Code">	tegra_machine_get_dai_link();</div><div id="wwpID0E0NG0HA" class="Code">&nbsp;</div><div id="wwpID0E0MG0HA" class="Code">/* set sfc dai_init */</div><div id="wwpID0E0LG0HA" class="Code">tegra_machine_set_dai_init(TEGRA210_DAI_LINK_SFC1_RX,</div><div id="wwpID0E0KG0HA" class="Code">	&amp;tegra_t210ref_sfc1_init);</div><div id="wwpID0E0JG0HA" class="Code">tegra_machine_set_dai_init(TEGRA210_DAI_LINK_SFC2_RX,</div><div id="wwpID0E0IG0HA" class="Code">	&amp;tegra_t210ref_sfc2_init);</div><div id="wwpID0E0HG0HA" class="Code">tegra_machine_set_dai_init(TEGRA210_DAI_LINK_SFC3_RX,</div><div id="wwpID0E0GG0HA" class="Code">	&amp;tegra_t210ref_sfc3_init);</div><div id="wwpID0E0FG0HA" class="Code">tegra_machine_set_dai_init(TEGRA210_DAI_LINK_SFC4_RX,</div><div id="wwpID0E0EG0HA" class="Code">	&amp;tegra_t210ref_sfc4_init);</div><div id="wwpID0E0DG0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>The generic machine driver handles DAI link management based on the initialized platform specific data in the DT file. This step is platform/machine dependent.</div><div id="wwpID0E0CG0HA" class="Body_Text">The Jetson TX1 and TX2 machine drivers are available in the kernel sources archive at:</div><div id="wwpID0E0BG0HA" class="Code">kernel/kernel-4.4/sound/soc/tegra-alt/tegra_t210ref_mobile_rt565x_alt.c</div><div id="wwpID0E0AG0HA" class="Code">kernel/t18x/sound/soc/tegra-alt/tegra_t186ref_mobile_rt565x_alt.c</div><div id="wwpID0E06F0HA" class="Body_Text">The Jetson TX1 and TX2 reference device tree “sound” nodes are available in the kernel source archive at:</div><div id="wwpID0E05F0HA" class="Code">hardware/nvidia/platform/t210/jetson/kernel-dts/tegra210-jetson-cv-base-p2957-2180-a00.dts</div><div id="wwpID0E04F0HA" class="Code">hardware/nvidia/platform/t18x/common/kernel-dts/t18x-common-platforms/tegra186-quill-common.dtsi</div><div id="wwpID0E03F0HA" class="Heading_3">Dynamic Audio Routing</div><div id="wwpID0E02F0HA" class="Body_Text">Instantiation of the sound card after boot indicates that all codec drivers and the platform driver are interconnected using the machine driver. The remaining step before obtaining the audio output on the physical codecs involves routing through the XBAR internals using MUX widgets to complete the DAPM path using the alsamixer utility. To support audio routing dynamically between AHUB modules, this route setting step is performed from user space. This provides flexibility for complicated use cases.</div><div id="wwpID0E01F0HA" class="Body_Text">For example, <span class="Code_Char">[amixer -c 0 cset name=‘I2S1 Mux’ ‘I2S1’]</span> realizes the internal AHUB path I2S1 RX -&gt; XBAR -&gt; I2S1 TX. </div><div id="wwpID0E0ZF0HA" class="Heading_3">Codec Driver Instantiation Using Device Tree</div><div id="wwpID0E0YF0HA" class="Body_Text">Based on architecture, the Makefile in the following directory conditionally compiles the required DTS files into DTB files:</div><div id="wwpID0E0XF0HA" class="Code">$KERNEL_TOP/arch/arm64/boot/dts/</div><div id="wwpID0E0WF0HA" class="Body_Text">When the kernel is flashed, the flash script chooses the required DTS file for parsing during boot, and the ASoC codecs listed in DTS are instantiated. To add any new module instantiation as a requirement, identify and edit the Device Tree script as reported in the <span class="Code_Char">dmesg</span> log on the target as shown in the following example:</div><div id="wwpID0E0VF0HA" class="Code">[    0.030809] Tegra Speedo/IDDQ fuse revision 4</div><div id="wwpID0E0UF0HA" class="Code">[    0.030832] Tegra: CPU Speedo ID 7, SoC Speedo ID 0, GPU Speedo ID 2</div><div id="wwpID0E0TF0HA" class="Code">[    0.030855] Tegra: CPU Process ID 0, SoC Process ID 1, GPU Process ID 0</div><div id="wwpID0E0SF0HA" class="Code">[    0.030879] Tegra: CPU Speedo Value 2044, SoC Speedo Value 1965, GPU Speedo Value 2079</div><div id="wwpID0E0RF0HA" class="Code">[    0.030911] Tegra: CPU IDDQ Value 2636, SoC IDDQ Value 2912, GPU IDDQ Value 3610</div><div id="wwpID0E0QF0HA" class="Code">[    0.030956] Tegra Revision: A02 SKU: 0x17 CPU Process: 0 SoC Process: 1</div><div id="wwpID0E0PF0HA" class="Code">[    0.032780] DTS File Name: /home/jonathanh/workdir/tegra/l4t-rel28/kernel/kernel-4.4/arch/arm64/boot/dts/../../../../../../hardware/nvidia/platform/t210/jetson/kernel-dts/tegra210-jetson-tx1-p2597-2180-a01-devkit.dts</div><div id="wwpID0E0OF0HA" class="Code">[    0.032834] DTB Build time: Dec 11 2017 15:26:52</div><div id="wwpID0E0NF0HA" class="Heading_5">To add new devices for instantiation</div><div id="wwpID0E0MF0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Add the device name with the base address and status as <span class="Code_Char">okay</span>.</div><div id="wwpID0E0LF0HA" class="Code">ahub {</div><div id="wwpID0E0KF0HA" class="Code">	status = "okay";</div><div id="wwpID0E0JF0HA" class="Code">	i2s@702d1000 {</div><div id="wwpID0E0IF0HA" class="Code">		pinctrl-names = "dap_active", "dap_inactive";</div><div id="wwpID0E0HF0HA" class="Code">		pinctrl-0 = &lt;&gt;;</div><div id="wwpID0E0GF0HA" class="Code">		pinctrl-1 = &lt;&gt;;</div><div id="wwpID0E0FF0HA" class="Code">		status = "okay";</div><div id="wwpID0E0EF0HA" class="Code">	};</div><div id="wwpID0E0DF0HA" class="Code">};</div><div id="wwpID0E0CF0HA" class="Heading_3">Clocking and Power Management</div><div id="wwpID0E0BF0HA" class="Body_Text">The clock tree of the Tegra ASoC driver in the idle state, when no audio record or playback is in progress, is as follows.</div><div id="wwpID0E0AF0HA" class="Code">clock                               state  ref div  rate</div><div id="wwpID0E06E0HA" class="Code">--------------------------------------------------------------</div><div id="wwpID0E05E0HA" class="Code">i2s4_sync                           on     1        24000000</div><div id="wwpID0E04E0HA" class="Code">i2s3_sync                           on     1        24000000</div><div id="wwpID0E03E0HA" class="Code"> *audio3                            off    0        24000000</div><div id="wwpID0E02E0HA" class="Code">i2s2_sync                           on     1        24000000</div><div id="wwpID0E01E0HA" class="Code">i2s1_sync                           on     1        24000000</div><div id="wwpID0E0ZE0HA" class="Code"> *audio1                            off    0        24000000</div><div id="wwpID0E0YE0HA" class="Code">i2s0_sync                           on     1        24000000</div><div id="wwpID0E0XE0HA" class="Code">spdif_in_sync                       on     1        24000000</div><div id="wwpID0E0WE0HA" class="Code"> *audio2_dmic                       off    0        24000000</div><div id="wwpID0E0VE0HA" class="Code"> *audio1_dmic                       off    0        24000000</div><div id="wwpID0E0UE0HA" class="Code"> *audio0_dmic                       off    0        24000000</div><div id="wwpID0E0TE0HA" class="Code"> *audio                             off    0        24000000</div><div id="wwpID0E0SE0HA" class="Code">	*audio_2x                        off    0  x2    48000000</div><div id="wwpID0E0RE0HA" class="Code"> *audio4                            off    0        24000000</div><div id="wwpID0E0QE0HA" class="Code"> *audio2                            off    0        24000000</div><div id="wwpID0E0PE0HA" class="Code"> *audio0                            off    0        24000000</div><div id="wwpID0E0OE0HA" class="Code">osc                                 on     3        38400000</div><div id="wwpID0E0NE0HA" class="Code">  pll_ref                           on     7  1.0   38400000</div><div id="wwpID0E0ME0HA" class="Code">	  pll_a                          on     1  x9.5  368639844</div><div id="wwpID0E0LE0HA" class="Code">		pll_a_out0                 on     1  15.0  24575990</div><div id="wwpID0E0KE0HA" class="Code">		   extern1                 on     3  1.0   24575990</div><div id="wwpID0E0JE0HA" class="Code">			  clk_out_1          on     2  1.0   24575990</div><div id="wwpID0E0IE0HA" class="Code">		   d_audio                 off    0  2.0   12287995</div><div id="wwpID0E0HE0HA" class="Code">		  *dmic3                   off    0  11.0  2234181</div><div id="wwpID0E0GE0HA" class="Code">		  *dmic2                   off    0  11.0  2234181</div><div id="wwpID0E0FE0HA" class="Code">		  *dmic1                   off    0  11.0  2234181</div><div id="wwpID0E0EE0HA" class="Code">		   spdif_out               off    0  21.0  1170286</div><div id="wwpID0E0DE0HA" class="Code">		   i2s4                    off    0  5.5   4468362</div><div id="wwpID0E0CE0HA" class="Code">		   i2s3                    off    0  5.50  4468362</div><div id="wwpID0E0BE0HA" class="Code">		   i2s1                    off    0  5.50  4468362</div><div id="wwpID0E0AE0HA" class="Code">		   i2s0                    off    0  10.50 2340571</div><div id="wwpID0E06D0HA" class="Code">     pll_p                          on     15 x10.6 408000000</div><div id="wwpID0E05D0HA" class="Code">		*spdif_in                  off    0  8.50  48000000</div><div id="wwpID0E04D0HA" class="Code">		ape                        off    0  2.0   204000000</div><div id="wwpID0E03D0HA" class="Code">		   xbar.ape                off    0        204000000</div><div id="wwpID0E02D0HA" class="Code">		   adsp.ape                off    0        204000000</div><div id="wwpID0E01D0HA" class="Code">		   adma.ape                off    0        204000000</div><div id="wwpID0E0ZD0HA" class="Body_Text">The clocks of the individual modules, AMX, ADX, AFC, SFC, MIXER, and others, are internally handled by the APE clock. The clock for the codec drivers I2S and XBAR are switched OFF in idle. They are turned ON when audio playback or recording is in progress. The <span class="Code_Char">idle_bias_off</span> option provided by ASoC core (<span class="Code_Char">snd_soc_codec_driver</span>) is set to 1 in the individual codec drivers for dynamic audio power management. With this option, the ASoC core calls the appropriate <span class="Code_Char">resume()</span> and <span class="Code_Char">suspend()</span> functions in the codec driver that was registered using <span class="Code_Char">SET_RUNTIME_PM_OPS</span> during platform probe.</div><div id="wwpID0E0YD0HA" class="Body_Text">The suspend and resume APIs are called when playback or record stops or starts. The suspend API caches the register map and disables the clock. The resume API enables the clock and then syncs the register map from the cache.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 23.4pt" cellspacing="0" summary=""><tr><td style="background-color: #76B900; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 45pt"><div id="wwpID0EABA0XD0HA" class="Note_Image"><span style="font-family: &quot;Trebuchet MS&quot;; font-size: 12pt; font-weight: bold">Note:</span></div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 346.5pt"><div id="wwpID0EAAA0XD0HA" class="Cell_Text">Volatile registers are not synced in this process. Those registers must be reprogrammed after the clock is re-enabled. The internal mapping RAM FIFOs, if any, are cleared during every suspend/resume cycle. The RAM configuration must be restored as well during this process.</div></td></tr></table></div><div id="wwpID0E0WD0HA" class="Heading_3">Audio Playback/Record Examples</div><div id="wwpID0E0VD0HA" class="Body_Text">To test audio playback and record scenarios, make sure the XBAR route is set up using alsamixer commands, based on the platform. The sample testing command for audio playback and record scenario is as follows.</div><div class="ww_skin_page_overflow"><table class="Table_Normal" style="margin-left: 41.75pt" cellspacing="0" summary=""><tr><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 179.65pt"><div id="wwpID0EABB0UD0HA" class="Cell_Heading"><span class="Strong">Command</span></div></td><td style="background-color: #DDEEBF; background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 222.1pt"><div id="wwpID0EAAB0UD0HA" class="Cell_Heading"><span class="Strong">Result</span></div></td></tr><tr><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0UD0HA" class="Cell_Text">aplay -D hw:tegrahda,3 sample.wav</div></td><td style="background-position: right center; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA0UD0HA" class="Cell_Text">Audio playback using HDMI/DP</div></td></tr></table></div><div id="wwpID0E0TD0HA" class="Heading_3">Troubleshooting</div><div id="wwpID0E0SD0HA" class="Heading_5">Issue 1: No Sound Cards Found</div><div id="wwpID0E0RD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Identify the ASoC error that lead to no sound card detection with the dmesg <span class="Code_Char">[dmesg | grep ASoC]</span> command. Output is as follows:</div><div id="wwpID0E0QD0HA" class="Code">[4.874720] tegra-audio-t210ref tegra-audio-t210ref.0: ASoC: no source widget found for x OUT</div><div id="wwpID0E0PD0HA" class="Code">[4.874724] tegra-audio-t210ref tegra-audio-t210ref.0: ASoC: Failed to add route x OUT-&gt; direct-&gt; Headphone-x</div><div id="wwpID0E0OD0HA" class="Code">[4.874736] tegra-audio-t210ref tegra-audio-t210ref.0: ASoC: no sink widget found for x IN</div><div id="wwpID0E0ND0HA" class="Code">[4.874739] tegra-audio-t210ref tegra-audio-t210ref.0: ASoC: Failed to add route LineIn-x-&gt; direct-&gt; x IN</div><div id="wwpID0E0MD0HA" class="List_Continue">In this case, <span class="Code_Char">x OUT</span> and <span class="Code_Char">x IN</span> are the widgets of the <span class="Code_Char">spdif-dit</span> dummy codec. It may not have been instantiated in ASoC. Confirm that with this command, if <span class="Code_Char">spdif-dit</span> is instantiated:</div><div id="wwpID0E0LD0HA" class="Code">cat /sys/kernel/debug/asoc/codecs</div><div id="wwpID0E0KD0HA" class="List_Continue">The <span class="Code_Char">spdif</span> device must be instantiated using <span class="Code_Char">platform_register</span> in the board-specific file.</div><div id="wwpID0E0JD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>If output from the <span class="Code_Char">dmesg [dmesg | grep ASoC]</span> command is as follows: </div><div id="wwpID0E0ID0HA" class="Code">[4.874720] tegra-audio-t210ref tegra-audio-t210ref.0: ASoC: CPU DAI DAP not registered</div><div id="wwpID0E0HD0HA" class="Body_Text">In this case, “DAP” is the CPU DAI for the I2S to codec dai link. The I2S codec may not be instantiated in ASoC. Confirm with this command, if tegra210-i2s is instantiated:</div><div id="wwpID0E0GD0HA" class="Code">cat /sys/kernel/debug/asoc/codecs</div><div id="wwpID0E0FD0HA" class="Body_Text">Identification of the DAI link at the point of failure would give a clue on the I2S instance number that failed to instantiate. Accordingly, the I2S codec driver can be instantiated by providing a suitable entry point in DTS file as described in <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0ZF0HA" title="Tegra ASoC Driver for Jetson TX1 and TX2">Codec Driver Instantiation Using Device Tree</a></span>.</div><div id="wwpID0E0ED0HA" class="Heading_5">Issue 2: Sound Not Audible</div><div id="wwpID0E0DD0HA" class="List_Number" style="margin-left: 67.5pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Confirm if the DAPM path is completed. Check the path using ALSA amixer utility as described in <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/asoc_driver.html#wwpID0E0ZB0HA" title="Tegra ASoC Driver for Jetson TX1 and TX2">Examples</a></span>.</div><div id="wwpID0E0CD0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Confirm the settings for the audio interface pins. The pins for the audio interface must be configured as special function IOs (SFIOs) and not GPIOs. Then the pinmux settings for the SFIO must select the desired audio function.</div><div id="wwpID0E0BD0HA" class="List_Continue_2">For example, to configure the I2S, DMIC and AUD_MCLK that are mapped to header J21 on the Jetson TX1 as SFIO, the following change must be made:</div><div id="wwpID0E0AD0HA" class="Code_Indent">diff --git a/kernel-dts/tegra210-jetson-cv-base-p2597-2180-a00.dts b/kernel-dts/tegra210-jetson-cv-base-p2597-2180-a00.dts</div><div id="wwpID0E06C0HA" class="Code_Indent">index d1046a3e3d22..10729ec8a48f 100644</div><div id="wwpID0E05C0HA" class="Code_Indent">--- a/kernel-dts/tegra210-jetson-cv-base-p2597-2180-a00.dts</div><div id="wwpID0E04C0HA" class="Code_Indent">+++ b/kernel-dts/tegra210-jetson-cv-base-p2597-2180-a00.dts</div><div id="wwpID0E03C0HA" class="Code_Indent">@@ -77,6 +77,27 @@</div><div id="wwpID0E02C0HA" class="Code_Indent"> 		};</div><div id="wwpID0E01C0HA" class="Code_Indent"> 	};</div><div id="wwpID0E0ZC0HA" class="Code_Indent"> </div><div id="wwpID0E0YC0HA" class="Code_Indent">+	gpio@6000d000 {</div><div id="wwpID0E0XC0HA" class="Code_Indent">+		p2597-j21-audio {</div><div id="wwpID0E0WC0HA" class="Code_Indent">+			gpio-hog;</div><div id="wwpID0E0VC0HA" class="Code_Indent">+			function;</div><div id="wwpID0E0UC0HA" class="Code_Indent">+			gpios = &lt;</div><div id="wwpID0E0TC0HA" class="Code_Indent">+				TEGRA_GPIO(B, 0) 0</div><div id="wwpID0E0SC0HA" class="Code_Indent">+				TEGRA_GPIO(B, 1) 0</div><div id="wwpID0E0RC0HA" class="Code_Indent">+				TEGRA_GPIO(B, 2) 0</div><div id="wwpID0E0QC0HA" class="Code_Indent">+				TEGRA_GPIO(B, 3) 0</div><div id="wwpID0E0PC0HA" class="Code_Indent">+				TEGRA_GPIO(BB, 0) 0</div><div id="wwpID0E0OC0HA" class="Code_Indent">+				TEGRA_GPIO(E, 4) 0</div><div id="wwpID0E0NC0HA" class="Code_Indent">+				TEGRA_GPIO(E, 5) 0</div><div id="wwpID0E0MC0HA" class="Code_Indent">+				&gt;;</div><div id="wwpID0E0LC0HA" class="Code_Indent">+			label = "I2S0_LRCLK", "I2S0_SDIN",</div><div id="wwpID0E0KC0HA" class="Code_Indent">+				"I2S0_SDOUT", "I2S0_CLK",</div><div id="wwpID0E0JC0HA" class="Code_Indent">+				"AUDIO_MCLK", "DMIC3_CLK",</div><div id="wwpID0E0IC0HA" class="Code_Indent">+				"DMIC3_DAT";</div><div id="wwpID0E0HC0HA" class="Code_Indent">+			status = "okay";</div><div id="wwpID0E0GC0HA" class="Code_Indent">+		};</div><div id="wwpID0E0FC0HA" class="Code_Indent">+	};</div><div id="wwpID0E0EC0HA" class="Code_Indent">+</div><div id="wwpID0E0DC0HA" class="Code_Indent"> 	pinmux@700008d4 {</div><div id="wwpID0E0CC0HA" class="Code_Indent"> 		/* Dynamic pinmux config for DMIC3 */</div><div id="wwpID0E0BC0HA" class="Code_Indent"> 		dmic3_dap_active_state: dmic3_dap_active {</div><div id="wwpID0E0AC0HA" class="List_Continue_2">To verify the default SFIO pinmux configuration, check the pinmux node in the appropriate device-tree source file for the board. For example, for Jetson TX1, check the pinmux node in the device-tree file to verify how the audio interface pins are configured:</div><div id="wwpID0E06B0HA" class="Code_Indent">hardware/nvidia/platform/t210/jetson/kernel-dts/tegra210-jetson-cv-pinmux-p2957-2180-a00.dts</div><div id="wwpID0E05B0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Confirm the <span class="Code_Char">status</span> property of the audio interface is set to <span class="Code_Char">okay</span> in the the appropriate device-tree source file.</div><div id="wwpID0E04B0HA" class="List_Continue_2">For example, for Jetson TX2, the device tree file is at:</div><div id="wwpID0E03B0HA" class="Code_Indent">hardware/nvidia/soc/t210/kernel-dts/tegra210-soc/tegra210-audio.dtsi </div><div id="wwpID0E02B0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Probe the audio signals with an oscilloscope.</div><div id="wwpID0E01B0HA" class="List_Continue_2">For example, if using I2S, probe the frame sync (FS) and bit clock (BCLK) to verify that the timings are correct.</div><div id="wwpID0E0ZB0HA" class="Heading_3">Examples</div><div id="wwpID0E0YB0HA" class="Body_Text">In these examples:</div><div id="wwpID0E0XB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Jetson TX1 <span class="Code_Char">&lt;soundcard-name&gt;</span> is <span class="Code_Char">tegrasndt210ref</span></div><div id="wwpID0E0WB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Jetson-TX2 <span class="Code_Char">&lt;soundcard-name&gt;</span> is <span class="Code_Char">tegrasndt186ref</span></div><div id="wwpID0E0VB0HA" class="Heading_4">ADMAIF</div><div id="wwpID0E0UB0HA" class="Heading_5">To use ADMAIF1 internal loopback</div><div id="wwpID0E0TB0HA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name=“ADMAIF1 Mux” ADMAIF1 </div><div id="wwpID0E0SB0HA" class="Code"># aplay -D hw:&lt;soundcard-name&gt;,0 &lt;inputfile.wav&gt;</div><div id="wwpID0E0RB0HA" class="Code"># arecord -D hw:&lt;soundcard-name&gt;,0 -r &lt;rate&gt; -c &lt;no.of channels&gt; -b &lt;bits per sample&gt; &lt;outputfile.wav&gt;</div><div id="wwpID0E0QB0HA" class="Heading_5">To use ADMAIF2 for playback and ADMAIF1 for playback</div><div id="wwpID0E0PB0HA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name=“ADMAIF1 Mux” ADMAIF2</div><div id="wwpID0E0OB0HA" class="Code"># aplay -D hw:&lt;soundcard-name&gt;,1 &lt;inputfile.wav&gt;</div><div id="wwpID0E0NB0HA" class="Code"># arecord -D hw:&lt;soundcard-name&gt;,0 -r &lt;rate&gt; -c &lt;no.of channels&gt; -b &lt;bits per sample&gt; &lt;outputfile.wav&gt;</div><div id="wwpID0E0MB0HA" class="Heading_4">I2S</div><div id="wwpID0E0LB0HA" class="Heading_5">To playback I2S with ADMA I/F 3</div><div id="wwpID0E0KB0HA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name=“I2S2 Mux” ADMAIF3 </div><div id="wwpID0E0JB0HA" class="Code"># aplay -D hw:&lt;soundcard-name&gt;,2 &lt;inputfile.wav&gt;</div><div id="wwpID0E0IB0HA" class="Heading_5">To use I2S2 with ADMA I/F 3 for capture</div><div id="wwpID0E0HB0HA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name=“ADMAIF3 Mux” I2S2</div><div id="wwpID0E0GB0HA" class="Code"># arecord -D hw:&lt;soundcard-name&gt;,2 -r &lt;rate&gt; -c &lt;no.of channels&gt; -b &lt;bits per sample&gt; &lt;outputfile.wav&gt;</div><div id="wwpID0E0FB0HA" class="Heading_5">To perform a loopback test with I2S2 using ADMA I/F3</div><div id="wwpID0E0EB0HA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="I2S2 Mux" "ADMAIF3"</div><div id="wwpID0E0DB0HA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="ADMAIF3 Mux" "I2S2"</div><div id="wwpID0E0CB0HA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="I2S2 Loopback" "on"</div><div id="wwpID0E0BB0HA" class="Code"># aplay -D hw:&lt;soundcard-name&gt;,2 &lt;inputfile.wav&gt;</div><div id="wwpID0E0AB0HA" class="Code"># arecord -D hw:&lt;soundcard-name&gt;,2 -r &lt;rate&gt; -c &lt;no.of channels&gt; -b &lt;bits per sample&gt; &lt;outputfile.wav&gt; </div><div id="wwpID0E6HA" class="Heading_5">To playback mono stream playback over I2S,both speakers, with an RT5658 codec</div><div id="wwpID0E5HA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="I2S1 Mux" "ADMAIF8"</div><div id="wwpID0E4HA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="ADMAIF8 TX mono to stereo conv" COPY</div><div id="wwpID0E3HA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="I2S1 Channels" "2"</div><div id="wwpID0E2HA" class="Code">&nbsp;</div><div id="wwpID0E1HA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="x Headphone Playback Volume" "0x1e"</div><div id="wwpID0EZHA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="x Stereo DAC MIXR DAC R1 Switch" "1"</div><div id="wwpID0EYHA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="x Stereo DAC MIXL DAC L1 Switch" "1"</div><div id="wwpID0EXHA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="x Int Spk Switch" "0"</div><div id="wwpID0EWHA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="x HPO R Playback Switch" "1"</div><div id="wwpID0EVHA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="x HPO L Playback Switch" "1"</div><div id="wwpID0EUHA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="x Headphone Jack Switch" "1"</div><div id="wwpID0ETHA" class="Code">&nbsp;</div><div id="wwpID0ESHA" class="Code"># aplay -D hw:&lt;soundcard-name&gt;,7 &lt;inputfile.wav&gt;</div><div id="wwpID0ERHA" class="Heading_4">DMIC</div><div id="wwpID0EQHA" class="Heading_5">To perform a 48 kHz stereo capture from DMIC3 using ADMIF9</div><div id="wwpID0EPHA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="ADMAIF9 Mux" DMIC3</div><div id="wwpID0EOHA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="DMIC3 Boost Gain" 400</div><div id="wwpID0ENHA" class="Code"># arecord -D hw:&lt;soundcard-name&gt;,8 -r 48000 -c 2 -b 16 &lt;outputfile.wav&gt;</div><div id="wwpID0EMHA" class="Heading_5">To perform 48 kHz mono capture from DMIC3 using ADMIF9, left MIC</div><div id="wwpID0ELHA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="ADMAIF9 Mux" DMIC3</div><div id="wwpID0EKHA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="DMIC3 Boost Gain" 400</div><div id="wwpID0EJHA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="DMIC3 Mono Channel Select" L</div><div id="wwpID0EIHA" class="Code"># arecord -D hw:&lt;soundcard-name&gt;,8 -r 48000 -c 1 -b 16 &lt;outputfile.wav&gt;</div><div id="wwpID0EHHA" class="Heading_5">To perform a mono capture from DMIC3 using ADMIF9, right MIC</div><div id="wwpID0EGHA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="ADMAIF9 Mux" DMIC3</div><div id="wwpID0EFHA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="DMIC3 Boost Gain" 400</div><div id="wwpID0EEHA" class="Code"># amixer -c &lt;soundcard-name&gt; cset name="DMIC3 Mono Channel Select" R</div><div id="wwpID0EDHA" class="Code"># arecord -D hw:&lt;soundcard-name&gt;,8 -r 48000 -c 1 -b 16 &lt;outputfile.wav&gt;</div><div id="wwpID0EBHA" class="Body_Text">&nbsp;</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /><hr color="#DEE4F0" /><table width="90%" align="center" summary=""><tr><td class="Footer_Left"><font color="gray"><b></b><br />
           Subject to Change | © 2017 by NVIDIA Corporation.
           All rights reserved.
        </font></td><td class="Footer_Right"><font color="gray"><div>PR-06076-R28</div><br /><div style="text-align: center; font-weight: bold;"><div>Revised: 05 Mar 2018 16:32:31</div></div></font></td></tr></table></footer></body></html>