<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>TX1 Boot Flow</title><link rel="Prev" href="bootloader_setup.html" title="Previous" /><link rel="Next" href="bootloader_update_tx1.html" title="Next" /><link rel="StyleSheet" href="css/bootflow_tx1.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/bootflow_tx1_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootflow_tx1.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pJ2TTd3sjwm0VMC87nwmbWw" class="ww_skin_page_body" style="background-attachment: scroll; background-image: url(&quot;watermark.png&quot;); background-position: center center; background-repeat: no-repeat; margin-left: 0pt; margin-right: 10pt" onload="Page.OnLoad('../index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootflow_tx1.html');"><header id="wwconnect_header"><div><table width="100%" align="center" summary=""><tr><td class="Header_Left"><img alt="NVIDIA Tegra" src="images/NVLogo_2D_H.jpg" width="204" height="44" border="0" /></td><td class="Header_Right"><div>NVIDIA Tegra Linux Driver Package</div><br />
           Development Guide <br /><font size="-1"><div>28.2 Release</div></font><br /></td></tr></table></div><!--     <br clear="all" />
 --><hr color="#DEE4F0" /><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwpID0E0MC0HA" class="Heading_2_Top">TX1 Boot Flow</div><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootflow_tx1.html#wwpID0E04B0HA">BootROM</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootflow_tx1.html#wwpID0E0SB0HA">Boot Loader Components</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootflow_tx1.html#wwpID0E0MB0HA">TegraBoot</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootflow_tx1.html#wwpID0EZHA">TegraBoot CPU</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootflow_tx1.html#wwpID0EVHA">CBoot</a></div></dd><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/bootflow_tx1.html#wwpID0EFHA">U-Boot</a></div></dd></dl></div><div id="wwpID0E0LC0HA" class="Body_Text">The primary function of the Jetson TX1 boot software is to initialize the SOC (System On a Chip), including:</div><div id="wwpID0E0KC0HA" class="List_Bullet" style="margin-left: 49.5pt; text-indent: -9pt"><span class="WebWorks_Number" style="width: 9pt"><span>•	</span></span>Initializing MC/EMC/CPU</div><div id="wwpID0E0JC0HA" class="List_Bullet" style="margin-left: 49.5pt; text-indent: -9pt"><span class="WebWorks_Number" style="width: 9pt"><span>•	</span></span>Setting up security parameters</div><div id="wwpID0E0IC0HA" class="List_Bullet" style="margin-left: 49.5pt; text-indent: -9pt"><span class="WebWorks_Number" style="width: 9pt"><span>•	</span></span>Loading different firmware</div><div id="wwpID0E0HC0HA" class="List_Bullet" style="margin-left: 49.5pt; text-indent: -9pt"><span class="WebWorks_Number" style="width: 9pt"><span>•	</span></span>Maintaining Chain of Trust</div><div id="wwpID0E0GC0HA" class="List_Bullet" style="margin-left: 49.5pt; text-indent: -9pt"><span class="WebWorks_Number" style="width: 9pt"><span>•	</span></span>Setting memory carveouts for different firmware</div><div id="wwpID0E0FC0HA" class="List_Bullet" style="margin-left: 49.5pt; text-indent: -9pt"><span class="WebWorks_Number" style="width: 9pt"><span>•	</span></span>Flashing the device</div><div id="wwpID0E0EC0HA" class="List_Bullet" style="margin-left: 49.5pt; text-indent: -9pt"><span class="WebWorks_Number" style="width: 9pt"><span>•	</span></span>Booting to the operating system</div><div id="wwpID0E0DC0HA" class="Body_Text">Additionally, the Jetson TX1 boot software also performs other operations defined by product requirements, including but not limited to:</div><div id="wwpID0E0CC0HA" class="List_Bullet" style="margin-left: 49.5pt; text-indent: -9pt"><span class="WebWorks_Number" style="width: 9pt"><span>•	</span></span>Initialization of HDMI/DSI</div><div id="wwpID0E0BC0HA" class="List_Bullet" style="margin-left: 49.5pt; text-indent: -9pt"><span class="WebWorks_Number" style="width: 9pt"><span>•	</span></span>Displaying the boot logo</div><div id="wwpID0E0AC0HA" class="Body_Text">The flow of control in the boot software is as follows.</div><div class="ww_skin_page_overflow"><div id="wwpID0E06B0HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/bootflow_tx1.1.1.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" /></div></div><div id="wwpID0E05B0HA" class="Body_Text">&nbsp;</div><div id="wwpID0E04B0HA" class="Heading_3">BootROM</div><div id="wwpID0E03B0HA" class="Body_Text">The Jetson TX1 BootROM (BR) is hard-wired in the Tegra chip. It initializes the Boot Media and loads bootloaders and firmware from the Boot Media.</div><div id="wwpID0E02B0HA" class="Body_Text">Multiple copies of the BootROM Boot Configuration Table (BCT) may be stored at the start of the Boot-Media. The BCT contains configuration parameters used by the BootROM for hardware initialization.</div><div id="wwpID0E0ZB0HA" class="Body_Text">The BCT also contains information about the boot loader (BL), including:</div><div id="wwpID0E0YB0HA" class="List_Bullet" style="margin-left: 54pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Size</div><div id="wwpID0E0XB0HA" class="List_Bullet" style="margin-left: 54pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Entry point</div><div id="wwpID0E0WB0HA" class="List_Bullet" style="margin-left: 54pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Load address</div><div id="wwpID0E0VB0HA" class="List_Bullet" style="margin-left: 54pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Hash</div><div id="wwpID0E0UB0HA" class="Body_Text">The BootROM uses this information to verify and load the boot loader. The boot flow is as follows:</div><div class="ww_skin_page_overflow"><div id="wwpID0E0TB0HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image3.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" /></div></div><div id="wwpID0E0SB0HA" class="Heading_3">Boot Loader Components</div><div id="wwpID0E0RB0HA" class="Body_Text">The Jetson TX1 boot loader and flash components are:</div><div id="wwpID0E0QB0HA" class="List_Bullet" style="margin-left: 54pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>TegraBoot, aka NVTBoot or just TBoot</div><div id="wwpID0E0PB0HA" class="List_Bullet" style="margin-left: 54pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>CPU-BL, aka nvtboot-cpu</div><div id="wwpID0E0OB0HA" class="List_Bullet" style="margin-left: 54pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Cboot</div><div id="wwpID0E0NB0HA" class="List_Bullet" style="margin-left: 54pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>U-Boot</div><div id="wwpID0E0MB0HA" class="Heading_3">TegraBoot</div><div id="wwpID0E0LB0HA" class="Body_Text">Jetson TX1 TegraBoot (NVTBoot) is the first boot software component loaded by BR in SysRAM, and runs on BPMP. </div><div id="wwpID0E0KB0HA" class="Body_Text">There are two variants of TegraBoot:</div><div id="wwpID0E0JB0HA" class="List_Bullet" style="margin-left: 58.5pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>One used for cold boot</div><div id="wwpID0E0IB0HA" class="List_Bullet" style="margin-left: 58.5pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>One for recovery boot/flashing</div><div id="wwpID0E0HB0HA" class="Body_Text">Both are generated using different configuration files and make files. </div><div id="wwpID0E0GB0HA" class="Body_Text">TegraBoot is responsible for:</div><div id="wwpID0E0FB0HA" class="List_Bullet" style="margin-left: 54pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Loading and initializing firmware (FW) components such as TOS</div><div id="wwpID0E0EB0HA" class="Body_Text">For details on each of these firmware components, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/security.html#" title="Security">Security</a></span>.</div><div id="wwpID0E0DB0HA" class="List_Bullet" style="margin-left: 54pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Creating carveouts</div><div id="wwpID0E0CB0HA" class="List_Bullet" style="margin-left: 54pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Completing CPU initialization </div><div id="wwpID0E0BB0HA" class="List_Bullet" style="margin-left: 54pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Loading the next stage boot loader </div><div id="wwpID0E0AB0HA" class="List_Bullet" style="margin-left: 54pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Supporting flashing</div><div id="wwpID0E6HA" class="List_Bullet" style="margin-left: 54pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Supporting RCM boot</div><div id="wwpID0E5HA" class="List_Bullet" style="margin-left: 54pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Reading PMIC reset reason</div><div id="wwpID0E4HA" class="List_Bullet" style="margin-left: 54pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Loading the bootloader device tree and passing the device tree load address to CBoot</div><div id="wwpID0E3HA" class="List_Bullet" style="margin-left: 54pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Stops execution when the CCPLEX is booted</div><div id="wwpID0E2HA" class="Body_Text">The components of TegraBoot are as follows:</div><div class="ww_skin_page_overflow"><div id="wwpID0E1HA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/image4.jpg" style="display: inline; left: 0pt; top: 0pt" alt="A screenshot of a cell phone Description generated with very high confidence" /></div></div><div id="wwpID0EZHA" class="Heading_3">TegraBoot CPU</div><div id="wwpID0EYHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Add rollback prevention.</div><div id="wwpID0EXHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Using bootloader DTB, perform EMC training and update kernel DTB with training results.</div><div id="wwpID0EWHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Pass control to Cboot.</div><div id="wwpID0EVHA" class="Heading_3">CBoot</div><div id="wwpID0EUHA" class="Body_Text">Jetson TX1 CBoot is the primary CPU boot loader used on mobile platforms in the cold boot path. CBoot is feature-rich boot loader that:</div><div id="wwpID0ETHA" class="List_Bullet" style="margin-left: 49.5pt; text-indent: -13.5pt"><span class="WebWorks_Number" style="width: 13.5pt"><span>•	</span></span>Boots the kernel</div><div id="wwpID0ESHA" class="List_Bullet" style="margin-left: 49.5pt; text-indent: -13.5pt"><span class="WebWorks_Number" style="width: 13.5pt"><span>•	</span></span>Supports display and boot logo/bmp splash</div><div id="wwpID0ERHA" class="List_Bullet" style="margin-left: 49.5pt; text-indent: -13.5pt"><span class="WebWorks_Number" style="width: 13.5pt"><span>•	</span></span>Based on the Little Kernel (LK) open source boot loader</div><div id="wwpID0EQHA" class="List_Bullet" style="margin-left: 49.5pt; text-indent: -13.5pt"><span class="WebWorks_Number" style="width: 13.5pt"><span>•	</span></span>Uses the interrupt and scheduling frameworks of LKC</div><div id="wwpID0EPHA" class="List_Bullet" style="margin-left: 49.5pt; text-indent: -13.5pt"><span class="WebWorks_Number" style="width: 13.5pt"><span>•	</span></span>Uses CDF for frameworks, drivers, and libraries</div><div id="wwpID0EOHA" class="Body_Text">As soon as the CPU starts running, CBoot starts in EL3 mode and begins executing TOS. TOS completes its initialization and passes control to CBoot in EL2 mode. </div><div id="wwpID0ENHA" class="Body_Text">BL and kernel use separate device trees stored in separate partitions. CBoot is responsible for:</div><div id="wwpID0EMHA" class="List_Bullet" style="margin-left: 54pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Parsing the CPU-BL parameters and initializing the boot loader device tree</div><div id="wwpID0ELHA" class="List_Bullet" style="margin-left: 54pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Booting to the kernel or chaining to U-Boot to boot the kernel</div><div id="wwpID0EKHA" class="List_Bullet" style="margin-left: 54pt"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Supporting the update mechanism</div><div id="wwpID0EJHA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Loading the recovery kernel</div><div id="wwpID0EIHA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•	</span></span>Unhalts the BPMP so that the BPMP-FW can start running</div><div id="wwpID0EHHA" class="Body_Text">The components of Cboot are as follows:</div><div class="ww_skin_page_overflow"><div id="wwpID0EGHA" class="Body_Text"><img class="Default" src="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/images/bootflow_tx1.1.4.jpg" style="display: inline; left: 0pt; top: 0pt" alt="" /></div></div><div id="wwpID0EFHA" class="Heading_3">U-Boot</div><div id="wwpID0EEHA" class="Body_Text">U-Boot is the default boot loader for NVIDIA® Tegra® Linux Driver Package. </div><div id="wwpID0EDHA" class="Body_Text">For more information, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/uboot_guide.html#" title="U-Boot Customization">U-Boot Customization.</a></span></div><div id="wwpID0EBHA" class="Normal">&nbsp;</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /><hr color="#DEE4F0" /><table width="90%" align="center" summary=""><tr><td class="Footer_Left"><font color="gray"><b></b><br />
           Subject to Change | © 2017 by NVIDIA Corporation.
           All rights reserved.
        </font></td><td class="Footer_Right"><font color="gray"><div>PR-06076-R28</div><br /><div style="text-align: center; font-weight: bold;"><div>Revised: 05 Mar 2018 16:32:27</div></div></font></td></tr></table></footer></body></html>